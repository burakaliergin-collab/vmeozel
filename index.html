<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Verb Matrix â€” v4.0 (Nihai SÃ¼rÃ¼m)</title>

<link rel="icon" href="favicon.ico" type="image/x-icon">

<link rel="manifest" href="manifest.json"> 

<link rel="stylesheet" href="style.css">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#667eea">


</head>
<body>
<div id="splashScreen">
    <img src="logo.png" alt="Logo" class="splash-logo">
</div>

<div id="welcomeView" class="view" style="z-index: 3000;">
    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 80vh; text-align: center;">
        <h1 style="color: #ffffff; font-size: 2.8rem; margin-bottom: 15px; text-shadow: 0 2px 4px rgba(0,0,0,0.2);">HoÅŸ Geldiniz!</h1>
        <p style="color: #e2e8f0; font-size: 1.2rem; margin-bottom: 40px; max-width: 500px;">LÃ¼tfen Ã§alÄ±ÅŸmak istediÄŸiniz Almanca seviyesini seÃ§in.</p>
        
        <div id="classSelectionContainer" class="button-grid" style="max-width: 600px; width: 100%; justify-content: center;">
        
       </div>
<div style="margin-top: 35px; width: 100%; max-width: 600px; padding: 0 20px;">
    <button class="btn btn-warning" style="width: 100%; justify-content: center; padding: 15px; font-size: 1.1rem; border-radius: 12px;" 
            onclick="renderMixedModeList(); showView('mixedSettingsView');">
        â­ KonularÄ± YÄ±ldÄ±zla (KarÄ±ÅŸÄ±k Mod AyarlarÄ±)
    </button>
</div>
    </div>
</div>

<div id="mixedView" class="view" style="display: none;">

    <h2 class="section-title">â­ KarÄ±ÅŸÄ±k Mod â€“ Konu SeÃ§imi</h2>

    <div class="content-box small-muted" style="margin-bottom:10px;">
        Bu ekranda Ã§alÄ±ÅŸmak istediÄŸin konularÄ± seÃ§ip yÄ±ldÄ±zlayabilirsin.
    </div>

    <div id="mixedFilterArea" class="button-grid" style="margin-bottom:15px;">
        <button class="btn btn-primary" onclick="filterMixed('all')">TÃ¼mÃ¼</button>
        <button class="btn btn-secondary" onclick="filterMixed('star')">â­ YÄ±ldÄ±zlÄ±lar</button>
    </div>

    <div id="mixedList" class="button-grid"></div>

</div>


<div id="musicPlayerContainer" class="music-player-container">
    <button id="musicToggleBtn" class="music-toggle-btn" title="MÃ¼zik Ã‡al/Durdur">ğŸ”Š</button>
    <input type="range" id="musicVolumeSlider" min="0" max="100" value="70" class="music-volume-slider" style="display: none;">
</div>

<div id="floatingNavTopRight">
    <button id="classNavBtn" class="floating-nav-btn" style="width: auto; padding: 0 15px; border-radius: 20px; font-weight: bold; font-size: 1rem;" onclick="openClassSelection()">A1</button>
    
    <button id="floatingGuideBtn" class="floating-nav-btn" title="KullanÄ±m KÄ±lavuzu" onclick="showGuide()">â­</button>
    <button id="modeToggleBtn" class="floating-nav-btn" title="Gece/GÃ¼ndÃ¼z toggle">ğŸŒ™</button>
</div>

<button id="floatingBackBtn" class="floating-nav-btn" title="Geri" onclick="goBackInHistory()">ğŸ”™</button>
<button id="floatingHomeBtn" class="floating-nav-btn" title="Ana MenÃ¼" onclick="showView('mainMenu')">ğŸ </button>
<button id="floatingAdminBtn" class="floating-nav-btn" title="YÃ¶netici" onclick="showView('adminView')">ğŸ”§</button>
<div class="container">
  <header>
    <img src="logo.png" alt="Verb Matrix Logo" style="max-width: 280px; height: auto; margin: 10px auto 0; display: block;">
    <div class="subtitle" id="appSubtitle" data-translate-key="app.subtitle">Fiiller Ä°le Almanca Ã–ÄŸrenme Platformu</div>
  </header>

  <div id="mainMenu" class="view active">
    <div class="button-grid">
      <button class="btn btn-primary" id="btnCalis" data-translate-key="menu.calis" onclick="loadAndShowGroupMenu()">ğŸ“š Ã‡alÄ±ÅŸ</button>
      <button class="btn btn-info" id="btnTekrar" data-translate-key="menu.tekrar" onclick="showView('tekrarMenu')">ğŸ”„ Tekrar</button>
      <button class="btn btn-warning" id="btnProgress" data-translate-key="menu.progress" onclick="showView('progress')">ğŸ“Š Ä°lerleme</button>
      <button class="btn btn-secondary" id="btnSettings" data-translate-key="menu.settings" onclick="showView('settings')">âš™ï¸ Ayarlar</button>
    </div>
  </div>

  <div id="tekrarMenu" class="view">
    <h2 class="large-centered-title" data-translate-key="titles.tekrar">ğŸ”„ TEKRAR</h2>
    <div class="button-grid">
      <button class="btn btn-srs-zor" onclick="startTekrar('zor')">
        <span data-translate-key="srs.zorlandiklarim">ZORLANDIKLARIM</span> (<span id="tekrarCountZor">0</span>)
      </button>
      <button class="btn btn-srs-normal" onclick="startTekrar('normal')">
        <span data-translate-key="srs.normal">NORMAL</span> (<span id="tekrarCountNormal">0</span>)
      </button>
      <button class="btn btn-srs-ogrendim" onclick="startTekrar('ogrendim')">
        <span data-translate-key="srs.ogrendiklerim">Ã–ÄRENDÄ°KLERÄ°M</span> (<span id="tekrarCountOgrenildi">0</span>)
      </button>
    </div>
    </div>

  <div id="tekrarModeMenu" class="view">
    <h2 class="large-centered-title" id="tekrarModeTitle">TEKRAR MODU</h2>

    <div class="content-box" style="margin-bottom: 20px;">
      <h4 data-translate-key="titles.conversionSelect">Ã‡eviri YÃ¶nÃ¼nÃ¼ SeÃ§in:</h4>
      <div class="button-grid" style="grid-template-columns: 1fr 1fr;">
        <button class="btn btn-primary" id="tekrarModeTRDE" onclick="setConversionMode('tr-de'); startTekrarModePrompt()">
            <span class="led-indicator" style="margin-right: 12px;"></span> ğŸ‡¹ğŸ‡· TR â†’ DE ğŸ‡©ğŸ‡ª
        </button>
        <button class="btn btn-info" id="tekrarModeDETR" onclick="setConversionMode('de-tr'); startTekrarModePrompt()">
            <span class="led-indicator" style="margin-right: 12px;"></span> ğŸ‡©ğŸ‡ª DE â†’ TR ğŸ‡¹ğŸ‡·
        </button>
      </div>
    </div>

    <div class="button-grid">
      <button class="btn btn-secondary" onclick="startTekrarMode('cloze')">ğŸ”² <span data-translate-key="modes.cloze">BoÅŸluk Doldurma</span></button>
      <button class="btn btn-secondary" onclick="startTekrarMode('wordorder')">ğŸ”¤ <span data-translate-key="modes.wordorder">Kelimeleri SÄ±ralama</span></button>
      <button class="btn btn-primary" onclick="startTekrarMode('quiz')">ğŸ¯ <span data-translate-key="modes.quiz">Quiz (Test)</span></button>
    </div>
    </div>

  <div id="groupMenu" class="view">
    <div class="group-select-header">
      <h2 data-translate-key="titles.start">BAÅLA</h2>
    </div>
    <div class="group-select-columns">
      <div class="group-column-title-container">
        <div class="group-column-title" data-translate-key="titles.groupSelect">Grup SeÃ§</div>
      </div>
      <div class="group-column-title-container">
        <div class="group-column-title" data-translate-key="titles.storySelect">Hikaye SeÃ§</div>
      </div>
    </div>
    <div id="groupButtons"></div>
    </div>

  <div id="verbMenu" class="view">
    <h2 class="section-title" data-translate-key="titles.verbSelect">FÄ°Ä°L SEÃ‡</h2>
    <div id="verbButtons" class="button-grid"></div>
    </div>
  <div id="sectionMenu" class="view">
    <h2 class="section-title" data-translate-key="titles.sectionSelect">BÃ–LÃœM SEÃ‡</h2>
    <div id="sectionButtons" class="button-grid"></div>
    </div>

  <div id="modeMenu" class="view">
    <h2 class="large-centered-title" data-translate-key="titles.conversionSelect">Ã‡EVÄ°RÄ° YÃ–NÃœ</h2>

    <div class="content-box" style="margin-bottom: 20px;">
      <h4 data-translate-key="titles.conversionSelect">Ã‡eviri YÃ¶nÃ¼nÃ¼ SeÃ§in:</h4>
      <div class="button-grid" style="grid-template-columns: 1fr 1fr;">
        <button class="btn btn-primary" id="modeTRDE" onclick="setConversionMode('tr-de'); startMode('study')">ğŸ‡¹ğŸ‡· TR â†’ DE ğŸ‡©ğŸ‡ª</button>
        <button class="btn btn-info" id="modeDETR" onclick="setConversionMode('de-tr'); startMode('study')">ğŸ‡©ğŸ‡ª DE â†’ TR ğŸ‡¹ğŸ‡·</button>
      </div>
    </div>
    </div>

  <div id="learningView" class="view">
    <h2 class="section-title" id="learningTitle">ğŸ“š Ã‡alÄ±ÅŸma</h2>
    <h3 id="learningSubtitle" style="text-align:center; color: #4a5568; font-weight: 600; margin-top: -10px; margin-bottom: 10px;"></h3>
    
    <div class="progress-container">
      <div class="progress-bar"><div id="progressFill" class="progress-fill">0%</div></div>
      <div style="text-align:center;margin-top:8px;font-weight:700;"><span id="progressText">0 / 0</span></div>
    </div>
      <div class="content-box">
      <div id="learningContent"></div>
      <div id="hintPanel" class="hint-area" style="display:none"></div>
      <div id="resultArea"></div>
      <div id="answerArea"></div>
    </div>
    
    <div id="completionControls" class="primary-action-container" style="display: none; margin-top: 15px;">
        <button class="btn btn-primary" id="nextStepBtn" style="min-width: 250px; justify-content: center;"></button>
    </div>

    <div id="srsControls" class="button-group-row">
        <button class="btn btn-srs-zor" onclick="rateCard('zor')">ğŸ¥µ <span data-translate-key="srs.zor">ZOR</span></button>
        <button class="btn btn-srs-normal" onclick="rateCard('normal')">ğŸ¤” <span data-translate-key="srs.normal">NORMAL</span></button>
        <button class="btn btn-srs-ogrendim" onclick="rateCard('ogrendim')">âœ… <span data-translate-key="srs.ogrendim">Ã–ÄRENDÄ°M</span></button>
    </div>
    <div id="quickEditPanel" class="content-box" style="display:none; margin-top: 15px;">
        <h4 id="quickEditTitle" style="margin-bottom: 10px;">Sayfa Ä°Ã§eriÄŸi HÄ±zlÄ± DÃ¼zenleme</h4>
        <label style="display:block;margin-top:12px;" data-translate-key="labels.tr">TR CÃ¼mle:</label>
        <textarea id="qe_tr" class="textarea-field" rows="3"></textarea>
        <label style="display:block;margin-top:12px;" data-translate-key="labels.de">DE CÃ¼mle:</label>
        <textarea id="qe_de" class="textarea-field" rows="3"></textarea>
        <label style="display:block;margin-top:12px;" data-translate-key="labels.hintText">CÃ¼mle Ä°pucu:</label>
        <textarea id="qe_hint" class="textarea-field" rows="3" placeholder="Bu cÃ¼mleye Ã¶zel ipucu ekleyin/dÃ¼zenleyin."></textarea>
        <div class="button-group-row">
            <button class="btn btn-secondary" onclick="saveQuickEdit()">âœ… <span data-translate-key="buttons.save">Kaydet</span> & Kapat</button>
            <button class="btn btn-danger" onclick="document.getElementById('quickEditPanel').style.display='none'" data-translate-key="buttons.cancel">Ä°ptal</button>
        </div>
    </div>
    <div class="primary-action-container">
      <button class="btn" id="actionBtn" data-translate-key="buttons.show" onclick="handleAction()">Kontrol Et / GÃ¶ster</button>
    </div>

    <div id="learningControlsAccordion">
        <div class="learning-controls-main">
            <button class="btn btn-info" onclick="toggleLearningPanel('panelHint')">ğŸ’¡ Ä°pucu</button>
            <button class="btn btn-primary" onclick="toggleLearningPanel('panelListen')">ğŸ”Š Dinle</button>
            <button class="btn btn-secondary" onclick="toggleLearningPanel('panelEdit')">âœï¸ DÃ¼zenle</button>
        </div>

        <div id="panelHint" class="learning-controls-panel">
            <div class="button-grid-learning">
                <button class="btn btn-ai" onclick="getAIHint()">ğŸ§  AI Ä°pucu Al</button>
                <button class="btn btn-info" onclick="showHintDetail('section')">BÃ¶lÃ¼m Ä°pucu</button>
                <button class="btn btn-info" onclick="showHintDetail('verb')">Fiil Ä°pucu</button>
                <button class="btn" id="toggleHintBtn" data-translate-key="buttons.hintToggle" onclick="toggleHintPanel()">CÃ¼mle Ä°pucu</button>
            </div>
        </div>
        <div id="panelListen" class="learning-controls-panel">
             <div class="button-grid-learning">
                <button class="btn" id="autoPlayBtn" onclick="toggleAutoPlay()">
                    <span class="led-indicator" id="autoPlayLed"></span>Otomatik Dinle
                </button>
                <button class="btn" id="slowModeToggleBtn" onclick="toggleSpeechSpeed()">
                    <span class="led-indicator" id="slowModeLedL"></span>ğŸ”Š YavaÅŸ Mod
                </button>
                <button class="btn" id="btnPlayDE_learning" data-translate-key="buttons.playDE" onclick="playCurrentSentence('de')">ğŸ”Š Almanca Dinle</button>
                <button class="btn" id="btnPlayTR" data-translate-key="buttons.playTR" onclick="playCurrentSentence('tr')">ğŸ”Š TÃ¼rkÃ§e Dinle</button>
             </div>
        </div>
        <div id="panelEdit" class="learning-controls-panel">
             <div class="button-grid-learning">
                <button class="btn" id="btnQuickEdit" onclick="showQuickEditPanel()">âœï¸ DÃ¼zelt/Ekle</button>
                <button class="btn" onclick="previousQuestion()" data-translate-key="buttons.previous">â† Ã–nceki</button>
                </div>
        </div>
    </div>
    </div>

  <div id="detailViewLayer" class="view">
    <div class="container">
        <h2 id="detailViewTitle"></h2>
        <div id="detailViewContent" class="content-box" style="white-space: pre-wrap;"></div>
        </div>
  </div>

  <div id="storyView" class="view">
    <h2 class="section-title" id="storyTitle" data-translate-key="titles.story">Hikaye</h2>
    <div class="content-box" id="storyContent"></div>
    <div class="button-grid-learning">
      <button class="btn btn-warning" onclick="showStoryQuestions()" data-translate-key="buttons.questions">ğŸ“ Sorular</button>
      <button class="btn" id="storySlowModeToggleBtn" onclick="toggleSpeechSpeed()">
        <span class="led-indicator" id="slowModeLedS"></span>ğŸ”Š YavaÅŸ Mod
      </button>
      <button class="btn" id="btnPlayDE_story" data-translate-key="buttons.playDE" onclick="playStoryAudio('de')">ğŸ”Š Almanca Dinle</button>
      <button class="btn" onclick="playStoryAudio('tr')" data-translate-key="buttons.playTR">ğŸ”Š TÃ¼rkÃ§e Dinle</button>
      </div>
  </div>

  <div id="storyQuestionsView" class="view">
    <h2 class="section-title" data-translate-key="titles.storyQuestions">Hikaye SorularÄ±</h2>
    <div class="content-box" id="storyQuestionsContent"></div>
    </div>
  <div id="settings" class="view">
    <h2 class="section-title" data-translate-key="titles.settings">âš™ï¸ Ayarlar</h2>
    <div class="content-box">
      <h3 data-translate-key="settings.dataManagement">ğŸ’¾ Veri YÃ¶netimi</h3>
      <div class="button-grid" style="grid-template-columns: 1fr 1fr; margin-top: 10px;">
        <button class="btn btn-primary" style="width:100%;" onclick="importDataFromFile()" data-translate-key="buttons.importJSON">ğŸ“¥ Ä°Ã§erik YÃ¼kle (JSON)</button>
        <button class="btn btn-secondary" style="width:100%;" onclick="exportData()" data-translate-key="buttons.exportJSON">ğŸ“¤ Ä°Ã§erik Ä°ndir (JSON)</button>
      </div>
    </div>
    <div class="content-box">
      <h3 data-translate-key="settings.appearance">ğŸ¨ GÃ¶rÃ¼nÃ¼m ve DiÄŸer</h3>
      <div style="margin-top: 12px;">
          <label style="display:block;font-weight:700;margin-bottom:6px" data-translate-key="settings.language">Dil:</label>
          <div style="display:flex;gap:8px">
            <button class="lang-btn active" id="langTR" onclick="changeLanguage('tr', this)">TÃ¼rkÃ§e</button>
            <button class="lang-btn" id="langDE" onclick="changeLanguage('de', this)">Deutsch</button>
          </div>
      </div
      ><label style="display:flex;align-items:center;gap:8px;margin-top:15px;">
          <input type="checkbox" id="nightModeToggle" style="width: 20px; height: 20px;"> <span data-translate-key="settings.nightMode">Gece Modu</span>
      </label>
      <div style="margin-top: 15px;">
        <label style="display:block;font-weight:700;margin-bottom:6px" data-translate-key="settings.music">MÃ¼zik:</label>
        <div style="display:flex; align-items: center; gap: 10px;">
          <button id="settingsMusicToggle" class="btn btn-primary btn-small" onclick="musicPlayer.toggleMusic()">ğŸ”Š Ã‡al/Durdur</button>
          <input type="range" id="settingsMusicVolume" min="0" max="100" value="70" style="flex: 1;">
        </div>
      </div>
    </div>
    <div class="content-box">
        <h3 data-translate-key="settings.appUpdate">ğŸ”„ Uygulama</h3>
        <button class="btn btn-warning" style="width:100%; margin-top: 10px;" onclick="forceUpdateApp()" data-translate-key="buttons.forceUpdate">ğŸ”„ UygulamayÄ± GÃ¼ncelle</button>
    </div>
    <div class="content-box" style="margin-top:12px">
      <h3 data-translate-key="settings.pasteJSONTitle">ğŸ“ JSON YapÄ±ÅŸtÄ±r (Mobil)</h3>
      <textarea id="jsonPaste" class="textarea-field" data-translate-key="placeholders.jsonPaste" placeholder="JSON iÃ§eriÄŸinizi buraya yapÄ±ÅŸtÄ±rÄ±n..." rows="5"></textarea>
      <div class="button-group-row" style="margin-top:8px">
        <button class="btn btn-primary" onclick="loadJsonFromTextarea()" data-translate-key="buttons.pasteAndLoad">ğŸ“¥ YapÄ±ÅŸtÄ±r & YÃ¼kle</button>
        <button class="btn btn-danger" onclick="document.getElementById('jsonPaste').value=''" data-translate-key="buttons.clear">Temizle</button>
      </div>
    </div>
    </div>
 
  <div id="progress" class="view">
    <h2 class="section-title" data-translate-key="titles.progress">ğŸ“Š Ä°lerleme</h2>
    <div class="content-box">
      <h3 data-translate-key="titles.srsStats">Tekrar Durumu</h3>
      <div class="progress-stats-grid">
        <div class="stat-card stat-card-zor">
          <h4 data-translate-key="srs.zorlandiklarim">ZORLANDIKLARIM</h4>
          <div class="stat-value" id="progressStatZor">0</div>
        </div>
           
        <div class="stat-card stat-card-normal">
          <h4 data-translate-key="srs.normal">NORMAL</h4>
          <div class="stat-value" id="progressStatNormal">0</div>
        </div>
        <div class="stat-card stat-card-ogrendim">
          <h4 data-translate-key="srs.ogrendiklerim">Ã–ÄRENDÄ°KLERÄ°M</h4>
          <div class="stat-value" id="progressStatOgrenildi">0</div>
        </div>
      </div>
    </div>
    <div class="content-box">
      <h3 data-translate-key="titles.totalProgress">Toplam Ã‡alÄ±ÅŸma Ä°lerlemesi</h3>
      <p class="small-muted" data-translate-key="messages.totalProgressDesc">TÃ¼m iÃ§erikteki (cÃ¼mlelerdeki) ilerleme durumunuz.</p>
      <div class="progress-container" style="margin-top: 15px;">
        <div class="progress-bar"><div id="totalProgressFill" class="progress-fill">0%</div></div>
        <div style="text-align:center;margin-top:8px;font-weight:700;"><span id="totalProgressText">0 / 0</span></div>
      </div>
    </div>
    <div class="content-box">
        <h3 data-translate-key="settings.progressManagement">ğŸ’¾ Ä°lerleme Veri YÃ¶netimi</h3>
        <div class="button-grid" style="grid-template-columns: 1fr 1fr; margin-top: 10px;">
           <button class="btn btn-primary" style="width:100%;" onclick="importSrsData()" data-translate-key="buttons.importProgress">ğŸ“¥ Ä°lerleme YÃ¼kle</button>
           <button class="btn btn-secondary" style="width:100%;" onclick="exportSrsData()" data-translate-key="buttons.exportProgress">ğŸ“¤ Ä°lerleme Ä°ndir</button>
        </div>
        <button class="btn btn-danger" style="width:100%; margin-top: 10px;" onclick="resetSrsData()" data-translate-key="buttons.resetSrs">âš ï¸ TÃ¼m Ä°lerlemeyi SÄ±fÄ±rla</button>
    </div>
   
  </div>
  <div id="mixedSettingsView" class="view">
    <h2 class="large-centered-title">â­ KONU SEÃ‡Ä°MÄ°</h2>
    <div class="content-box">
        <p style="text-align:center; color:#666;">
            KarÄ±ÅŸÄ±k Mod'da Ã§alÄ±ÅŸmak istediÄŸiniz konulara yÄ±ldÄ±z verin.<br>
            <small>(Sadece yÄ±ldÄ±zlÄ± konular fiil menÃ¼sÃ¼nde gÃ¶rÃ¼necektir)</small>
        </p>
        
        <div style="display:flex; justify-content:center; gap:10px; margin-bottom:15px;">
            <button class="btn btn-primary" onclick="renderMixedModeList('all')">TÃ¼mÃ¼</button>
            <button class="btn btn-warning" onclick="renderMixedModeList('starred')">Sadece YÄ±ldÄ±zlÄ±lar</button>
        </div>

        <div id="mixedTopicList" class="button-grid"></div>
    </div>
</div>
  <div id="adminView" class="view">
    <h2 class="section-title" data-translate-key="titles.adminPanel">ğŸ”§ YÃ¶netici Paneli</h2>
    <div class="button-grid">
      <button class="btn btn-primary" onclick="showView('adminContentView')" data-translate-key="admin.contentManagement">ğŸ“š Ä°Ã§erik YÃ¶netimi</button>
      <button class="btn btn-warning" onclick="showGroupVerbImporter()">ğŸ—ï¸ Grup & Fiil YÃ¼kle</button>
      <button class="btn btn-info" onclick="showTsvImporter()">ğŸ“Š Toplu CÃ¼mle YÃ¼kle</button>
      <button class="btn btn-secondary" onclick="showView('adminSentenceListView')" data-translate-key="admin.listAllSentences">ğŸ“‹ TÃ¼m CÃ¼mleleri Listele</button>
      <button class="btn btn-success" onclick="showView('adminDataManagementView')">ğŸ’¾ GeliÅŸmiÅŸ Veri YÃ¶netimi</button> 
    </div>
    <div id="adminGroupVerbArea" class="content-box" style="display:none; margin-top: 15px; border-color: #fbd38d;">
        <h4 data-translate-key="admin.groupVerbTitle">ğŸ—ï¸ Toplu Grup & Fiil YÃ¼kleme</h4>
        <p class="small-muted" data-translate-key="admin.groupVerbDesc">
          Excel'den kopyaladÄ±ÄŸÄ±nÄ±z YENÄ° GRUP ve FÄ°Ä°L listenizi buraya yapÄ±ÅŸtÄ±rÄ±n.<br>
          KullanmanÄ±z gereken sÃ¼tun sÄ±rasÄ± (Sekme/Tab ile ayrÄ±lmÄ±ÅŸ):<br>
          <b>GrupID | GrupAdÄ± | FiilID | FiilAdÄ± (TR) | FiilAdÄ± (DE)</b>
        </p>
        <textarea id="groupVerbPasteArea" class="textarea-field" rows="10" placeholder="g21 (Tab) PAKET TESLÄ°M SÃœRECÄ° (Tab) v61 (Tab) almak, toplamak (Tab) abholen..."></textarea>
        <div class="button-group-row">
            <button class="btn btn-warning" onclick="parseAndImportGroupsAndVerbs()">âœ… <span data-translate-key="buttons.pasteAndLoadTsv">YÃ¼kle ve Ä°ÅŸle</span></button>
            <button class="btn btn-danger" onclick="document.getElementById('adminGroupVerbArea').style.display='none'" data-translate-key="buttons.cancel">Ä°ptal</button>
      </div>
 </div>

    <div id="adminTsvArea" class="content-box" style="display:none; margin-top: 15px; border-color: #10b981;">
             <h4 data-translate-key="admin.tsvTitle">ğŸ“Š Toplu CÃ¼mle YÃ¼kle</h4>

        <!-- YENÄ°: Grup ve Fiil SeÃ§im AlanlarÄ± -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; align-items: flex-end; margin-bottom: 15px;">
            <div>
                <label style="font-weight:bold;">1. Grup SeÃ§in</label>
                <select id="bulk_import_group" class="select-field"></select>
            </div>
            <div>
                <label style="font-weight:bold;">2. Fiil SeÃ§in</label>
                <select id="bulk_import_verb" class="select-field"></select>
            </div>
        </div>

        <!-- YENÄ°: Dinamik olarak gÃ¶rÃ¼necek iÃ§erik alanÄ± -->
        <div id="bulkImportContentArea" style="display: none;">
            <p class="small-muted">SeÃ§ili fiil iÃ§in cÃ¼mleleri aÅŸaÄŸÄ±daki formata uygun olarak yapÄ±ÅŸtÄ±rÄ±n:<br><b>Konu ID;TR CÃ¼mle;DE CÃ¼mle;CÃ¼mle Ä°pucu (isteÄŸe baÄŸlÄ±)</b></p>
            <textarea id="tsvPasteArea" class="textarea-field" rows="10" placeholder="1;Ben gidiyorum;Ich gehe;Bu bir ipucudur..."></textarea>
            <div class="button-group-row">
                <button class="btn btn-info" onclick="adminPreviewTsv()">ğŸ” Verileri Ã–nizle</button>
                <button class="btn btn-danger" onclick="document.getElementById('adminTsvArea').style.display='none'" data-translate-key="buttons.cancel">Ä°ptal</button>
            </div>
        </div>


        <div id="tsvPreviewArea" style="margin-top: 15px;">
            <!-- Ã–nizleme tablosu buraya gelecek -->
        </div>
    </div>
    </div>

  <div id="adminContentView" class="view">
     <h2 class="section-title" data-translate-key="admin.contentManagement">ğŸ“š Ä°Ã§erik YÃ¶netimi</h2>
     <div class="button-grid" style="grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));">
        


        <button class="btn btn-secondary" onclick="showAdminForm('editSentence')">âœï¸ <span data-translate-key="admin.editSentence">CÃ¼mle Ekle/DÃ¼zenle</span></button>  
        <button class="btn btn-danger" onclick="showView('adminBulkEditView')">âœï¸ Toplu CÃ¼mle DÃ¼zenle</button>
        <button class="btn btn-primary" onclick="showAdminForm('addGroup')">â• <span data-translate-key="admin.addGroup">Grup Ekle/DÃ¼zenle</span></button>
        <button class="btn btn-primary" onclick="showAdminForm('addVerb')">â• <span data-translate-key="admin.addVerb">Fiil Ekle/DÃ¼zenle</span></button>
        <button class="btn btn-primary" onclick="showAdminForm('addSection')">â• <span data-translate-key="admin.addSection">Konu Havuzu Ekle/DÃ¼zenle</span></button>
        <button class="btn btn-info" onclick="showAdminForm('addStory')">â• <span data-translate-key="admin.addStory">Hikaye Ekle/DÃ¼zenle</span></button>
        <button class="btn btn-info" onclick="showAdminForm('addHint')">ğŸ’¡ <span data-translate-key="admin.hintManagement">Ä°pucu Ekle/DÃ¼zenle</span></button>
        
        <button class="btn btn-warning" onclick="showAdminForm('groupOrder')">â†•ï¸ SÄ±ralamayÄ± DÃ¼zenle (Gruplar)</button> 
        <button class="btn btn-warning" onclick="showAdminForm('classManagement')">ğŸ“ SÄ±nÄ±f YÃ¶netimi</button>
        <button class="btn btn-warning" onclick="showAdminForm('domainManager')">ğŸ“‚ Alan (Kategori) YÃ¶netimi</button>
        <button class="btn btn-primary" onclick="showAdminForm('editGuide')">â­ <span data-translate-key="admin.editGuide">KÄ±lavuz Metnini DÃ¼zenle</span></button>
     </div>
     <div id="adminContentArea" class="content-box" style="margin-top: 15px; display: none;">
     </div>
     </div>

  <div id="adminSentenceListView" class="view">
    <h2 class="section-title" data-translate-key="admin.listAllSentences">ğŸ“‹ TÃ¼m CÃ¼mleleri Listele</h2>
    <div class="content-box">
      <div class="button-group-row" style="margin-bottom:8px;">
        <button class="btn btn-secondary" onclick="renderAllSentencesTable()" data-translate-key="buttons.refreshList">ğŸ”„ Yenile Liste</button>
        <button class="btn btn-warning" onclick="exportSentencesCsv()" data-translate-key="buttons.exportCSV">ğŸ“¤ TSV Ä°ndir (Tablo)</button>
      </div>
      <div id="allSentencesTable" style="max-height:60vh;overflow:auto"></div>
    </div>
    </div>
  <div id="adminBulkEditView" class="view">
    <h2 class="large-centered-title">Toplu CÃ¼mle DÃ¼zenleme</h2>
    
    <div class="content-box">
        <div class="button-group-row" style="align-items: flex-end; gap: 10px; flex-wrap: wrap;">
            
            <div style="flex-grow: 1;">
                <label style="display:block; margin-bottom:5px; font-weight:bold;">1. Grup SeÃ§in</label>
                <select id="bulk_edit_group" class="select-field" onchange="bulkEditLoadVerbs()">
                    <option value="">YÃ¼kleniyor...</option>
                </select>
            </div>

            <div style="flex-grow: 1;">
                <label style="display:block; margin-bottom:5px; font-weight:bold;">2. Fiil SeÃ§in</label>
                <select id="bulk_edit_verb" class="select-field" onchange="bulkEditLoadSentencesForVerb()">
                    <option value="">Ã–nce Grup SeÃ§in</option>
                </select>
            </div>
            
            <div>
                <button class="btn btn-secondary" onclick="fillBulkEditSelectors()" title="Listeyi Yenile">ğŸ”„ Yenile</button>
            </div>
        </div>

        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px dashed #ccc;">
            <button class="btn btn-warning" style="width: 100%;" onclick="adminStartBatchAnalysis()">
                ğŸ§  YZ Toplu Analiz & Ä°pucu Ãœret (SeÃ§ili Liste Ä°Ã§in)
            </button>
             <p class="small-muted" style="margin-top:5px; text-align:center;">
                Not: "TÃ¼m BÃ¶lÃ¼mler" seÃ§iliyken bu iÅŸlem uzun sÃ¼rebilir. Sunucunun (server.js) aÃ§Ä±k olduÄŸundan emin olun.
            </p>
        </div>
    </div>

    <div id="bulkEditTableContainer" class="content-box" style="margin-top: 20px;">
        <p style="text-align:center; color:#718096;">LÃ¼tfen yukarÄ±dan Fiil ve Konu seÃ§iniz.</p>
    </div>

    <div class="button-group-row">
        <button class="btn btn-secondary" onclick="showView('adminContentView')">â† Geri DÃ¶n</button>
    </div>
</div>
<div id="adminDataManagementView" class="view">
    <h2 class="section-title">ğŸ’¾ GeliÅŸmiÅŸ Veri YÃ¶netimi</h2>

    <div id="adminDataManagement" class="content-box">
        <h3 style="margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom:10px;">YapÄ±landÄ±rma & Yedekleme AraÃ§larÄ±</h3>

        <div style="margin-bottom: 20px;">
            <h4 class="small-title">A. Tam Sistem YedeÄŸi (JSON)</h4>
            <p class="small-muted">TÃ¼m ayarlarÄ±, ilerlemeyi ve iÃ§erikleri tek dosya olarak indirip yÃ¼kler.</p>
            <div class="button-group-row">
                <button class="btn btn-secondary" onclick="exportData()">â¬‡ï¸ Tam YedeÄŸi Ä°ndir (.json)</button>
                <button class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">â¬†ï¸ Yedek YÃ¼kle</button>
            </div>
        </div>

        <div style="margin-bottom: 20px; background: #f0fff4; padding: 15px; border-radius: 8px; border: 1px dashed #48bb78;">
            <h4 class="small-title" style="color:#2f855a;">B. Alan & Grup & Fiil YapÄ±landÄ±rmasÄ± (TSV)</h4>
            <p class="small-muted">Format: <b>AlanID | AlanTR | AlanDE | GrupID | GrupAdÄ± | FiilID | FiilTR | FiilDE</b></p>
            
            <div class="button-group-row">
                <button class="btn btn-primary" onclick="downloadStructureTSV()">â¬‡ï¸ YapÄ±yÄ± Ä°ndir (Txt)</button>
                <button class="btn btn-warning" onclick="toggleStructureImport()">â¬†ï¸ YapÄ±sal Veri YÃ¼kle</button>
            </div>

            <div id="structureImportArea" style="display:none; margin-top: 15px;">
                <textarea id="structureInput" class="textarea-field" rows="10" placeholder="Ã–rn: mesleki|Mesleki Almanca|Beruf|g1|Ofis|v1|yazmak|schreiben..."></textarea>
                <div style="text-align: right; margin-top: 5px;">
                    <button class="btn btn-success" onclick="processStructureImport()">âœ… Verileri Ä°ÅŸle ve Kaydet</button>
                </div>
                <p class="small-muted" style="color:red;">UyarÄ±: Bu iÅŸlem Alan ve Grup yapÄ±nÄ±zÄ± gÃ¼nceller.</p>
            </div>
        </div>

        <div style="margin-bottom: 20px; background: #fff5f5; padding: 15px; border-radius: 8px; border: 1px dashed #fc8181;">
            <h4 class="small-title" style="color:#c53030;">C. ID DeÄŸiÅŸtirme ve Veri TaÅŸÄ±ma SihirbazÄ±</h4>
            <p class="small-muted">Bir Grubun veya Fiilin ID'sini deÄŸiÅŸtirirseniz, iÃ§indeki cÃ¼mleleri kaybetmemek iÃ§in buradan taÅŸÄ±ma yapmalÄ±sÄ±nÄ±z.</p>
            
            <div class="button-group-row" style="align-items: flex-end;">
                <div style="flex-grow:1;">
                    <label style="font-size:0.8rem; font-weight:bold;">TÃ¼rÃ¼ SeÃ§in</label>
                    <select id="mig_type" class="select-field">
                        <option value="verb">Fiil ID'si TaÅŸÄ± (v1 -> meslek_v1)</option>
                        <option value="group">Grup ID'si TaÅŸÄ± (g1 -> meslek_g1)</option>
                    </select>
                </div>
                <div style="flex-grow:1;">
                    <label style="font-size:0.8rem; font-weight:bold;">Eski ID</label>
                    <input type="text" id="mig_old_id" class="input-field" placeholder="Ã–rn: v1">
                </div>
                <div style="flex-grow:1;">
                    <label style="font-size:0.8rem; font-weight:bold;">Yeni ID</label>
                    <input type="text" id="mig_new_id" class="input-field" placeholder="Ã–rn: meslek_v1">
                </div>
                <button class="btn btn-danger" onclick="executeMigration()">ğŸš€ TaÅŸÄ±</button>
            </div>
            <p id="mig_result" class="small-muted" style="margin-top:10px; color:#2f855a; font-weight:bold;"></p>
        </div>

        <div style="margin-bottom: 20px; background: #fffaf0; padding: 15px; border-radius: 8px; border: 1px dashed #ed8936;">
            <h4 class="small-title" style="color:#c05621;">D. Konu NumarasÄ±nÄ± DeÄŸiÅŸtir (BaÅŸlÄ±k + Ä°Ã§erik)</h4>
            <p class="small-muted">Bir konunun numarasÄ±nÄ± deÄŸiÅŸtirdiÄŸinizde, o konuya ait baÅŸlÄ±k ve tÃ¼m cÃ¼mleler yeni numaraya taÅŸÄ±nÄ±r.</p>
            
            <div class="button-group-row" style="align-items: flex-end;">
                <div style="flex-grow:1;">
                    <label style="font-size:0.8rem; font-weight:bold;">Mevcut Numara</label>
                    <input type="number" id="mov_old_sec" class="input-field" placeholder="Ã–rn: 6">
                </div>
                <div style="flex-grow:1;">
                    <label style="font-size:0.8rem; font-weight:bold;">Yeni Numara</label>
                    <input type="number" id="mov_new_sec" class="input-field" placeholder="Ã–rn: 16">
                </div>
                
                <button class="btn btn-warning" onclick="changeTopicNumberSystem()">ğŸ”„ NumarayÄ± DeÄŸiÅŸtir</button>
            </div>
            <p id="mov_result" class="small-muted" style="margin-top:10px; color:#c05621; font-weight:bold;"></p>
        </div>
    </div>
</div>
<input type="file" id="fileInput" accept=".json" style="display:none">
<input type="file" id="progressFileInput" accept=".json" style="display:none">
<script src="script.js"></script>

</body>
</html>
